#!/bin/sh
# preinst script for st2 component
#
# see: dh_installdeb(1)

set -e

# summary of how this script can be called:
#        * <new-preinst> `install'
#        * <new-preinst> `install' <old-version>
#        * <new-preinst> `upgrade' <old-version>
#        * <old-preinst> `abort-upgrade' <new-version>

PKG=$DPKG_MAINTSCRIPT_PACKAGE
DIV_LINKS="bin/st2-bootstrap-rmq bin/st2-register-content"

# Handle links manually without dpkg-divert (it can't be used in this case).
for file in $DIV_LINKS; do
  # Links are updated on removal, so just create if a link doesn't exist
  [ -L /usr/$file ] || ln -s /usr/share/python/$PKG/$file /usr/$file
done

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0
