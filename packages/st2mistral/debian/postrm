#!/bin/sh
# postrm script for st2bundle
#
# see: dh_installdeb(1)
set -e

# Locate binary (even on shells which don't support which)
# ps. it doesn't return 1 status as original which does.
which() { 
  find $(echo $PATH | sed 's/:/ /g') -type f -perm +111 -name $@ -print -quit
}

## Trying to locate installed pip binary.
#
if [ -x /usr/share/python/mistral/bin/pip ]; then
  # Try bundled mistral package by st2
  PIP=/usr/share/python/mistral/bin/pip
else
  # Fallback to pip found in system paths.
  # This case covers only mistral provided by native debian packages, i.e.
  # Installation will fail if mistral is located in its specific virtualenv.
  PIP=$(which pip)
  if [ -z $PIP ]; then
    echo "System pip couldn't be located. :( Try installing python-pip package."
  fi
fi

# Don't fail if we encounterd problem with pip, heh :)
[ -z $PIP ] && exit 0
$PIP uninstall st2mistral

# case "$1" in
#     purge|remove|upgrade|failed-upgrade|abort-install|abort-upgrade|disappear)
#     ;;

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0
